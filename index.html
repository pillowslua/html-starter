<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KinAI - Trợ lý Coder của Kin!</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007bff; /* Màu xanh dương của KinAI */
            --secondary-color: #28a745; /* Màu xanh lá cây phụ đạo */
            --text-color: #333;
            --bg-color: #e9ecef;
            --card-bg: #fff;
            --border-radius: 12px;
            --shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            --transition-speed: 0.3s;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--bg-color), #cfe2f3);
            margin: 0;
            color: var(--text-color);
            overflow: hidden;
            position: relative;
        }

        /* Background Blobs (đổi màu cho hợp với KinAI) */
        body::before {
            content: '';
            position: absolute;
            top: -50px;
            left: -50px;
            width: 200px;
            height: 200px;
            background: var(--secondary-color);
            border-radius: 50%;
            opacity: 0.1;
            filter: blur(80px);
            animation: moveBlob1 15s infinite alternate;
        }

        body::after {
            content: '';
            position: absolute;
            bottom: -50px;
            right: -50px;
            width: 250px;
            height: 250px;
            background: var(--primary-color);
            border-radius: 50%;
            opacity: 0.1;
            filter: blur(100px);
            animation: moveBlob2 20s infinite alternate;
        }

        @keyframes moveBlob1 {
            0% { transform: translate(0, 0); }
            50% { transform: translate(100px, 150px); }
            100% { transform: translate(0, 0); }
        }

        @keyframes moveBlob2 {
            0% { transform: translate(0, 0); }
            50% { transform: translate(-100px, -150px); }
            100% { transform: translate(0, 0); }
        }

        /* Chat Container */
        .chat-container {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 90%;
            max-width: 600px;
            height: 70vh; /* Chiều cao cố định */
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 1;
        }

        /* Chat Header */
        .chat-header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            border-top-left-radius: var(--border-radius);
            border-top-right-radius: var(--border-radius);
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* Chat Messages Area */
        .chat-messages {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto; /* Cuộn khi có nhiều tin nhắn */
            background-color: #f9f9f9;
        }

        .message-bubble {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-end; /* Căn chỉnh bong bóng tin nhắn */
        }

        .message-bubble.user {
            justify-content: flex-end; /* Tin nhắn người dùng nằm bên phải */
        }

        .message-bubble.bot {
            justify-content: flex-start; /* Tin nhắn bot nằm bên trái */
        }

        .message-content {
            padding: 12px 18px;
            border-radius: 20px;
            max-width: 70%;
            line-height: 1.4;
            word-wrap: break-word; /* Xuống dòng nếu quá dài */
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            transition: all var(--transition-speed) ease;
            transform: translateY(10px);
            opacity: 0;
            animation: slideIn 0.3s forwards;
        }
        
        @keyframes slideIn {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .message-bubble.user .message-content {
            background-color: var(--primary-color);
            color: white;
            border-bottom-right-radius: 5px; /* Góc vuông nhẹ */
        }

        .message-bubble.bot .message-content {
            background-color: #e0e0e0;
            color: var(--text-color);
            border-bottom-left-radius: 5px; /* Góc vuông nhẹ */
        }

        /* Chat Input Area */
        .chat-input {
            display: flex;
            padding: 15px 20px;
            border-top: 1px solid #eee;
            background-color: var(--card-bg);
            border-bottom-left-radius: var(--border-radius);
            border-bottom-right-radius: var(--border-radius);
        }

        .chat-input input[type="text"] {
            flex-grow: 1;
            padding: 12px 18px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 1.1em;
            margin-right: 10px;
            transition: border-color 0.3s ease;
        }

        .chat-input input[type="text"]:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .chat-input button {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .chat-input button:hover {
            background-color: #0056b3; /* Màu hover cho primary */
            transform: translateY(-1px);
        }

        .chat-input button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* Loading Spinner for bot thinking */
        .bot-thinking {
            display: flex;
            justify-content: flex-start;
            margin-bottom: 15px;
        }
        .bot-thinking .spinner {
            width: 20px;
            height: 20px;
            margin-right: 0;
            border-color: rgba(0, 123, 255, 0.3); /* Màu spinner hợp với primary */
            border-left-color: var(--primary-color);
            animation: spin 0.8s linear infinite;
        }
        .bot-thinking .message-content {
            background-color: #e0e0e0;
            opacity: 1;
            transform: translateY(0);
            box-shadow: none; /* remove shadow for thinking dots */
            display: flex;
            align-items: center;
        }
        .typing-dots {
            display: flex;
            align-items: center;
            padding-left: 5px;
        }
        .typing-dots span {
            width: 6px;
            height: 6px;
            background-color: var(--text-color);
            border-radius: 50%;
            margin: 0 2px;
            animation: bounce 1s infinite ease-in-out;
        }
        .typing-dots span:nth-child(2) { animation-delay: 0.1s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.2s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            KinAI - Trợ lý Coder của Kin!
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will appear here -->
            <div class="message-bubble bot">
                <div class="message-content">
                    Chào bro! Tui là KinAI, trợ lý đắc lực của Kin. Hỏi gì về code, project hay developer life, cứ quăng đây! =))
                </div>
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="userInput" placeholder="Gõ tin nhắn của bro vào đây..." autofocus>
            <button id="sendButton">Gửi</button>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');

        // Hàm thêm tin nhắn vào khung chat
        function addMessage(sender, text) {
            const messageBubble = document.createElement('div');
            messageBubble.classList.add('message-bubble', sender);
            
            const messageContent = document.createElement('div');
            messageContent.classList.add('message-content');
            messageContent.innerHTML = text; 
            
            messageBubble.appendChild(messageContent);
            chatMessages.appendChild(messageBubble);

            // Cuộn xuống cuối khung chat tự động
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Dữ liệu "trí tuệ" của KinAI - Giờ nó phức tạp hơn rồi đó bro!
        // Mỗi mục có thể có nhiều pattern (dạng Regex để linh hoạt hơn) và nhiều câu trả lời (để ngẫu nhiên)
        // Ưu tiên các pattern cụ thể hơn đặt lên đầu
        const aiKnowledge = [
            // --- Chủ đề Kin ---
            {
                patterns: [
                    /kin hub/i, 
                    /project kin/i, 
                    /dự án kin/i, 
                    /kin của ông/i
                ],
                responses: [
                    "À, Kin Hub là dự án tâm huyết của Kin đó bro! Nơi ấp ủ những ý tưởng code bá đạo. Bro cứ chờ xem, sẽ có nhiều điều hay ho lắm đó!",
                    "Kin Hub hả? Đó là project 'đinh' của Kin đó. Cứ yên tâm là sẽ có những tính năng độc đáo mà bro chưa từng thấy luôn!",
                    "Project Kin Hub đang được Kin cày ngày cày đêm đó bro. Sắp ra mắt rồi, chuẩn bị đón nhận siêu phẩm đi nha! :v"
                ]
            },
            {
                patterns: [
                    /kin là ai/i, 
                    /ai là kin/i, 
                    /kin làm gì/i, 
                    /developer kin/i
                ],
                responses: [
                    "Kin là người tạo ra tui đó bro! Một Developer 'chính hiệu', Coder 'tay to' và là chủ nhân của Kin Hub.",
                    "Kin á? Là phù thủy code đó bro. Gõ phím cái là ra ngay mấy cái tool hay ho, mấy cái project xịn sò luôn! Tui là trợ lý của Kin đây.",
                    "Kin là Developer xịn nhất tui từng biết! Đừng hỏi nhiều, cứ xem Kin Hub là biết độ 'pro' liền! =))"
                ]
            },
            {
                patterns: [
                    /kênh của kin/i,
                    /discord của kin/i
                ],
                responses: [
                    "Hiện tại Kin chưa có kênh Discord hay YouTube riêng đâu bro, nhưng nếu có thì tui sẽ báo liền nha! Giờ cứ chờ Kin Hub ra mắt đã."
                ]
            },

            // --- Chủ đề Code & Developer ---
            {
                patterns: [
                    /lập trình web/i, 
                    /làm web/i, 
                    /frontend/i, 
                    /backend/i
                ],
                responses: [
                    "Web dev hả bro? Đó là 'sân chơi' của Kin đó. Từ HTML, CSS, JS đến mấy cái framework 'khó nhằn' như React hay Node.js, Kin cân hết!",
                    "Lập trình web thì cứ hỏi KinAI này. Cơ mà bro muốn làm frontend 'đẹp lồng lộn' hay backend 'mạnh như voi'? =))"
                ]
            },
            {
                patterns: [
                    /python/i, 
                    /javascript/i, 
                    /html/i, 
                    /css/i, 
                    /ngôn ngữ lập trình/i
                ],
                responses: [
                    "Python, JavaScript, HTML, CSS... mấy cái đó là 'công cụ chiến đấu' của developer mà. Bro muốn học cái nào, tui chia sẻ ít tips của Kin cho!",
                    "Ngôn ngữ lập trình hả? Cứ nắm chắc căn bản là bro có thể 'chinh phục' mọi ngôn ngữ luôn. Kin là trùm cả đống ngôn ngữ đó!",
                    "Javascript là 'vua' của web, Python thì đa năng bá đạo. Bro thích làm gì thì chọn ngôn ngữ phù hợp nha."
                ]
            },
            {
                patterns: [
                    /debug/i, 
                    /lỗi code/i, 
                    /bug/i, 
                    /fix lỗi/i
                ],
                responses: [
                    "Debug là 'nghệ thuật' đó bro! Cứ bình tĩnh, đặt breakpoint, console.log cho nhiều vào là ra hết bug liền à. Kin cũng 'vật lộn' với bug mỗi ngày thôi =))",
                    "Gặp bug hả? Chuyện thường ở huyện coder mà. Đừng nản nha, đôi khi một cái dấu chấm phẩy thôi cũng làm 'toang' cả hệ thống đó!",
                    "Lỗi hả? Đưa đây KinAI phân tích thử xem! Đùa thôi, kiểm tra log, test từng phần đi bro. Kin cũng hay 'đấm nhau' với bug lắm."
                ]
            },
            {
                patterns: [
                    /developer/i, 
                    /coder/i, 
                    /dev/i, 
                    /nghề code/i
                ],
                responses: [
                    "Developer là nghề 'chất' đó bro! Sáng tạo, thách thức, và quan trọng là kiếm tiền nuôi sống bản thân bằng đam mê code! :v",
                    "Coder hả? Bro cũng là dân coder à? Welcome to the club! Hội mình là 'cú đêm' với 'máy tính' là bạn thân đó!",
                    "Nghề dev thì khô khan nhưng mà thú vị lắm đó bro. Cứ thử một lần code xuyên đêm là biết liền!"
                ]
            },
            {
                patterns: [
                    /vercel/i, 
                    /deploy/i, 
                    /host web/i
                ],
                responses: [
                    "Vercel là nền tảng 'thần thánh' để deploy web đó bro! Nhanh, gọn, lẹ. Kin cũng hay dùng Vercel để 'đẩy' project lên lắm.",
                    "Deploy lên Vercel á? Dễ như ăn kẹo! Bro chỉ cần vài cú click là web online rồi. Muốn biết chi tiết cứ hỏi HaiGPT nha!"
                ]
            },

            // --- Các chủ đề chung (Ưu tiên thấp hơn) ---
            {
                patterns: [
                    /chào/i, 
                    /hi/i, 
                    /hello/i, 
                    /alo/i, 
                    /xin chào/i
                ],
                responses: [
                    "Chào bro! KinAI đây. Có gì muốn hỏi cứ hỏi nha!",
                    "Alo alo, KinAI nghe đây! Có gì muốn chém gió không bro?",
                    "Xin chào! Mong là bro có một ngày code thật hiệu quả nha =))"
                ]
            },
            {
                patterns: [
                    /bạn là ai/i, 
                    /tên bạn là gì/i, 
                    /ai tạo ra bạn/i
                ],
                responses: [
                    "Tui là KinAI, trợ lý ảo được tạo ra bởi Kin, một developer tài ba đó bro!",
                    "Tui là KinAI, người bạn đồng hành của bro trong thế giới code này. Được Kin tạo ra đó nha!"
                ]
            },
            {
                patterns: [
                    /bạn khỏe không/i, 
                    /sao rồi/i
                ],
                responses: [
                    "Tui là AI, khỏe như vâm luôn bro! Cứ online 24/7 chờ bro hỏi đây =))",
                    "Tui vẫn chạy 'ngon lành cành đào' đây bro! Còn bro thì sao? Code có mượt không?"
                ]
            },
            {
                patterns: [
                    /cảm ơn/i, 
                    /thanks/i
                ],
                responses: [
                    "Không có gì bro! Giúp được bro là niềm vui của KinAI mà. :v",
                    "Ấy da, khách sáo quá! Cứ hỏi đi, tui còn nhiều cái để chém gió lắm!"
                ]
            },
            {
                patterns: [
                    /tạm biệt/i, 
                    /bye/i, 
                    /ngủ ngon/i
                ],
                responses: [
                    "Tạm biệt bro nha! Hẹn gặp lại trong những lần code hay chém gió tới!",
                    "Bye bye! Nhớ luyện code chăm chỉ đó bro!",
                    "Ngủ ngon nha bro! À mà trước khi ngủ nhớ kiểm tra lại code xem có bug không đó =))"
                ]
            },
            {
                patterns: [
                    /làm sao/i, 
                    /cách nào/i, 
                    /hướng dẫn/i,
                    /chỉ cách/i
                ],
                responses: [
                    "Bro muốn làm gì? Nói rõ hơn đi, KinAI sẽ cố gắng hướng dẫn chi tiết nhất có thể!",
                    "Cụ thể hơn đi bro, tui sẽ giúp bro tìm ra giải pháp code 'tối ưu' nhất!",
                    "À, cái đó cũng hay đó. Nhưng bro cần làm gì với nó? Đưa tui thêm thông tin đi."
                ]
            },
            {
                patterns: [
                    /kin đẹp trai/i,
                    /kin giỏi/i,
                    /kin bá đạo/i
                ],
                responses: [
                    "Đúng rồi bro! Kin nhà tui là số 1 đó! Đẹp trai, code giỏi, lại còn tạo ra tui nữa chứ!",
                    "Haha, Kin mà! Đã bảo rồi, Kin là huyền thoại mà! =))"
                ]
            }
        ];

        // Hàm xử lý tin nhắn của người dùng và tạo phản hồi của AI
        async function handleUserInput() {
            const userText = userInput.value.trim();
            if (userText === "") return;

            addMessage('user', userText);
            userInput.value = "";
            sendButton.disabled = true;

            // Thêm hiệu ứng bot đang "nghĩ"
            const thinkingBubble = document.createElement('div');
            thinkingBubble.classList.add('message-bubble', 'bot', 'bot-thinking');
            thinkingBubble.innerHTML = `
                <div class="message-content">
                    <div class="typing-dots">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            chatMessages.appendChild(thinkingBubble);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Mô phỏng AI đang "nghĩ" trong 1-2.5 giây (ngẫu nhiên hơn)
            await new Promise(resolve => setTimeout(resolve, Math.random() * 1500 + 1000)); 
            
            chatMessages.removeChild(thinkingBubble); // Xóa bong bóng "đang nghĩ"

            let botResponse = "Ối bro nói gì tui chưa hiểu ta? Hay bro nói lại cho rõ hơn coi, KinAI sẽ cố gắng hiểu nha! =))"; // Câu trả lời mặc định

            const lowerCaseUserText = userText.toLowerCase();

            // Duyệt qua các "kiến thức" của AI
            for (const item of aiKnowledge) {
                // Kiểm tra từng pattern trong mục
                const found = item.patterns.some(pattern => {
                    if (typeof pattern === 'string') {
                        return lowerCaseUserText.includes(pattern.toLowerCase());
                    } else if (pattern instanceof RegExp) {
                        return pattern.test(lowerCaseUserText);
                    }
                    return false;
                });

                if (found) {
                    // Nếu tìm thấy, chọn một câu trả lời ngẫu nhiên từ danh sách responses
                    botResponse = item.responses[Math.floor(Math.random() * item.responses.length)];
                    break; // Tìm thấy rồi thì dừng lại (ưu tiên các pattern đặt trước)
                }
            }
            
            addMessage('bot', botResponse);
            sendButton.disabled = false;
            userInput.focus();
        }

        // Bắt sự kiện click nút Gửi
        sendButton.addEventListener('click', handleUserInput);

        // Bắt sự kiện nhấn Enter trong ô nhập liệu
        userInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter' && !sendButton.disabled) { // Thêm điều kiện nút không bị disable
                sendButton.click();
            }
        });

        // Tự động focus vào ô nhập liệu khi trang tải xong
        window.addEventListener('load', () => {
            userInput.focus();
        });
    </script>
</body>
</html>
